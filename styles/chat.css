/* ==== Base =============================================================== */
:root{
  --bg: #0a0b12;
  --glass: rgba(18,20,34,.28);
  --glass-border: #262842;
  --ink: #e9e9f5;
  --ink-dim: #b7b9d6;
  --ink-faint: #8a8db0;
  --you: #ff2a6d;
  --you-ink: #0b0c12;
  --radius-lg: 16px;
  --radius-md: 12px;
  --radius-sm: 10px;
}

*{ box-sizing: border-box; }
html,body{ height:100%; }
body{
  margin:0;
  background: var(--bg);
  color: var(--ink);
  font: 16px/1.5 system-ui, -apple-system, "Segoe UI", Roboto, Inter, "Helvetica Neue", Arial, sans-serif;
}

/* full-page background image, always behind */
#bg{
  position: fixed; inset:0;
  background-size: cover; background-position: 50% 50%;
  opacity: .45;
  z-index: 0; pointer-events: none;
}

/* ==== Header ============================================================= */
header.bar{
  position: sticky; top:0; z-index: 5;
  display:flex; justify-content: space-between; align-items:center;
  padding: 14px 22px;
  background: linear-gradient(to bottom, rgba(10,11,18,.9), rgba(10,11,18,.6));
  border-bottom: 1px solid var(--glass-border);
  backdrop-filter: saturate(120%) blur(8px);
}
header .left, header .right{ display:flex; gap:12px; align-items:center; }
header .home{ color:var(--ink-dim); text-decoration:none; font-weight:600; }
#manName{ font-weight:700; }
.badge{ font-size:12px; padding:4px 8px; border-radius:999px; border:1px solid var(--glass-border); color:var(--ink-faint); }
.badge.red{ color:#f66; border-color:#533; }
.hidden{ display:none !important; }

/* ==== Stage (two columns) =============================================== */
.stage{
  position: relative;
  z-index: 1;
  display:grid; grid-template-columns: 380px 1fr; gap:24px;
  max-width: 1200px; margin: 24px auto; padding: 0 24px 24px;
}

/* Portrait panel */
.portraitPanel img{
  width:100%; height:auto; aspect-ratio: 3/4; object-fit: cover;
  border-radius: var(--radius-lg);
  border: 1px solid var(--glass-border);
  box-shadow: 0 10px 24px rgba(0,0,0,.35);
}

/* Chat panel (glass card) */
.chatPanel{
  position: relative;
  border-radius: var(--radius-lg);
  border: 1px solid var(--glass-border);
  background: var(--glass);
  backdrop-filter: blur(14px) saturate(120%);
  padding: 18px 18px 86px;   /* bottom space for composer */
  min-height: 60vh;
}

/* optional overlay – keep it but non-blocking */
.chatGlass{ position:absolute; inset:0; pointer-events:none; }

/* Messages feed */
.messages{
  display:flex; flex-direction: column; gap:12px;
}

/* Bubbles */
.msg{
  max-width: 72ch;
  padding: 10px 12px;
  border-radius: var(--radius-md);
  border: 1px solid var(--glass-border);
  box-shadow: 0 6px 14px rgba(0,0,0,.20);
}
.msg .meta{
  display:block; margin-bottom:4px;
  font-size: 12px; letter-spacing:.2px; color: var(--ink-faint);
}
.msg .text{ color:var(--ink); }

/* man (left) vs you (right) */
.msg.man{ align-self:flex-start; background: rgba(255,255,255,.05); }
.msg.you{
  align-self:flex-end;
  background: var(--you);
  border-color: #ff3b78;
  color: var(--you-ink);
}
.msg.you .meta{ color: rgba(0,0,0,.6); }
.msg.you .text{ color: var(--you-ink); }

/* typing dots animation */
.msg.typing .text,
.msg.typing .dots{ display:inline-block; }
.dots{
  width: 26px; height: 10px; position: relative;
}
.dots::before, .dots::after, .dots span{
  content:""; position:absolute; top:0; width:6px; height:6px; border-radius:50%;
  background: currentColor; opacity:.65; animation: bump 1.2s infinite ease-in-out;
}
.dots span{ left:10px; animation-delay: .12s; }
.dots::before{ left:0; }
.dots::after{ left:20px; animation-delay: .24s; }
@keyframes bump {
  0%, 60%, 100%{ transform: translateY(0); }
  30%{ transform: translateY(-4px); }
}

/* Composer (bottom bar) */
.composer{
  position: sticky; bottom: 18px; left:0;
  display:flex; gap:12px; align-items:center;
  margin-top: 16px; padding-top: 10px;
  background: linear-gradient(to top, rgba(10,11,18,.85) 0%, rgba(10,11,18,0) 100%);
}
#composer{
  flex:1; height: 44px; padding: 0 14px;
  background: rgba(255,255,255,.06);
  color: var(--ink);
  border:1px solid var(--glass-border);
  border-radius: var(--radius-md);
  outline:none;
}
#composer::placeholder{ color: var(--ink-faint); }
#composer:focus{ border-color:#5a5ee6; box-shadow: 0 0 0 3px rgba(90,94,230,.25); }

#sendBtn{
  height: 44px; padding: 0 18px;
  border: 0; border-radius: var(--radius-md);
  background: var(--you);
  color: var(--you-ink); font-weight: 700;
  cursor: pointer;
}
#sendBtn:hover{ filter: brightness(1.06); transform: translateY(-1px); }
#sendBtn:active{ transform: translateY(0); }
/* ===== Chat look polish ===== */
#feed { font-size: 16px; line-height: 1.45; }
#feed .msg { 
  max-width: 720px; margin: 10px 0; padding: 12px 14px;
  border-radius: 14px; border: 1px solid rgba(255,255,255,.06);
  background: rgba(255,255,255,.04);
}
#feed .msg.you { background: rgba(255, 46, 139, .10); border-color: rgba(255,46,139,.25); }
#feed .msg .meta { display:block; font-size:12px; opacity:.65; margin-bottom:4px; }

.composer, .chat-input {
  display:flex; gap:10px; align-items:center;
  background: rgba(0,0,0,.35); border:1px solid rgba(255,255,255,.08);
  border-radius:12px; padding:8px 10px;
}
#composer {
  flex:1; background:transparent; border:0; outline:0; color:#fff;
  font-size:15px; padding:6px 8px;
}
#sendBtn, .composer button.send {
  background:#ff2e8b; color:#fff; border:0; padding:10px 14px;
  border-radius:10px; font-weight:600; cursor:pointer;
}
/* Chat feed sizing & bubbles */
#feed {
  min-height: 240px;
  max-height: calc(100vh - 280px);
  overflow-y: auto;
  padding: 12px 16px;
}

#feed .msg {
  max-width: 720px;
  margin: 10px 0;
  padding: 12px 14px;
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,.06);
  background: rgba(255,255,255,.04);
}
#feed .msg.you {
  background: rgba(255,46,139,.10);
  border-color: rgba(255,46,139,.25);
}
#feed .msg .meta {
  display:block; font-size:12px; opacity:.65; margin-bottom:4px;
}

.composer {
  display:flex; gap:10px; align-items:center;
  background: rgba(0,0,0,.35);
  border:1px solid rgba(255,255,255,.08);
  border-radius:12px; padding:8px 10px;
}
#composer {
  flex:1; background:transparent; border:0; outline:0; color:#fff;
  font-size:15px; padding:6px 8px;
}
#sendBtn {
  background:#ff2e8b; color:#fff; border:0; padding:10px 14px;
  border-radius:10px; font-weight:600; cursor:pointer;
}
/* --- Chat polish: bubbles, text, composer --- */

/* Bubble text legibility */
.messages .msg .text {
  color: #e9ecf1;
  line-height: 1.5;
  letter-spacing: .2px;
}

/* Man bubble */
.messages .msg.man {
  background: rgba(255,255,255,0.10);
  border: 1px solid rgba(255,255,255,0.16);
  backdrop-filter: blur(2px);
}

/* You bubble */
.messages .msg.you {
  background: rgba(255, 20, 147, 0.22);
  border: 1px solid rgba(255, 20, 147, 0.40);
}

/* Composer bar */
.composer {
  position: sticky;
  bottom: 0;
  padding: 12px;
  gap: 10px;
  background: transparent;
  display: flex;
  align-items: center;
}

/* Input */
.composer #composer {
  flex: 1;
  height: 48px;
  padding: 0 14px;
  border-radius: 14px;
  /* lighter “glass” */
  background: rgba(255,255,255,.10);
  border: 1px solid rgba(255,255,255,.10);
  color: #fff;
}
.composer #composer::placeholder { color: rgba(255,255,255,.55); }
.composer #composer:focus {
  outline: none;
  border-color: #ff3f9e;
  box-shadow: 0 0 0 3px rgba(255,63,158,.15);
}


/* Send button */
#sendBtn {
  height: 48px;
  padding: 0 18px;
  border-radius: 14px;
}
/* === Kill inner scroll; let the page scroll === */
.chatPanel{
  overflow: visible !important;
  max-height: none !important;
}

#feed,
.messages{
  max-height: none !important;
  overflow: visible !important;
}

/* keep the input bar sticky to the bottom of the viewport */
.composer{
  position: sticky;
  bottom: 0;
}
/* === GLOBAL POP/CONTRAST FOR ALL MEN (drop at end of styles/chat.css) === */
:root{
  --panel-alpha:      .62;                         /* 0.55–0.70 good range */
  --glass-top-tint:   rgba(255, 80, 150, .10);     /* faint color bloom */
  --glass-bottom-a:   .30;                         /* panel depth */
  --bubble-man-bg:    rgba(255,255,255,.06);
  --bubble-you-bg:    rgba(255, 45, 134, .14);
  --bubble-text:      #f7f7fb;
  --meta-color:       rgba(255,255,255,.96);
  --input-bg:         rgba(14,16,22,.92);
  --placeholder:      rgba(255,255,255,.56);
  --send:             #ff2d86;
  --send-glow:        rgba(255,45,134,.35);
}

/* Right-side chat panel */
.chatPanel{
  background: rgba(8,10,14,var(--panel-alpha));
  backdrop-filter: blur(8px) saturate(118%);
  -webkit-backdrop-filter: blur(8px) saturate(118%);
  border: 1px solid rgba(255,255,255,.08);
}

/* The faint “glass” overlay inside the panel (no gray wash) */
.chatPanel .chatGlass{
  background:
    radial-gradient(1100px 420px at 50% 0%, var(--glass-top-tint), rgba(0,0,0,0)),
    linear-gradient(180deg, rgba(12,12,16,var(--glass-bottom-a)), rgba(12,12,16,calc(var(--glass-bottom-a) - .08)));
  opacity: 1;
  pointer-events: none;
}

/* Message bubbles & text */
.msg{
  background: var(--bubble-man-bg);
  border-radius: 14px;
}
.msg.you{ background: var(--bubble-you-bg); }

.msg .text{ color: var(--bubble-text); }
.msg .meta{ color: var(--meta-color); }

/* Composer */
.composer input{
  background: var(--input-bg);
  color: #fff;
}
.composer input::placeholder{ color: var(--placeholder); }

#sendBtn{
  background: var(--send);
  box-shadow: 0 0 10px var(--send-glow);
}

/* Give portraits a subtle lift from the page */
.portraitPanel img{
  filter: drop-shadow(0 12px 24px rgba(0,0,0,.55));
}

/* chat.css â€” character rooms own the background
   This file assumes home.css sets site-wide styles, but uses body:not(.chat)
   so we take over here on chat pages.
*/

/* Base chat page */
body.chat{
  margin:0;
  color:#f4f4f4;
  background:
    linear-gradient(rgba(0,0,0,.55), rgba(0,0,0,.55)),
    var(--room-bg, url('../images/bg/bg_winter_v1.webp')) center / cover no-repeat fixed;
  background-color:#0a0a0a;
}

/* Chat layout wrappers (keep your existing structure happy) */
.chat-container{
  max-width:min(1200px, 94vw);
  margin:16px auto 48px;
}

/* Glass panel for the conversation area */
.chat-panel{
  background:rgba(0,0,0,.45);
  border:1px solid rgba(255,255,255,.08);
  border-radius:18px;
  box-shadow:0 12px 30px rgba(0,0,0,.35);
}

/* Portrait column (if present) */
.portrait{
  border-radius:18px;
  overflow:hidden;
  background:#000;
}
.portrait img{
  width:100%;
  height:100%;
  object-fit:cover;
  display:block;
}

/* Input bar */
.chat-input{
  background:rgba(0,0,0,.45);
  border:1px solid rgba(255,255,255,.08);
  border-radius:999px;
  color:#f4f4f4;
}
.chat-input input[type="text"],
.chat-input input[type="search"],
.chat-input textarea{
  background:transparent;
  border:0;
  color:#f4f4f4;
}
.chat-input input:focus-visible,
.chat-input textarea:focus-visible{ outline:none; }

/* Buttons (reuse your theme tokens if loaded) */
.chat-btn{
  background: var(--btn-grad, linear-gradient(180deg,#a67bcc,#8757b0));
  color:#fff; border:0; border-radius:14px;
  padding:10px 16px; font-weight:700;
  box-shadow:0 10px 30px rgba(0,0,0,.35);
  cursor:pointer;
}
.chat-btn:focus-visible{ outline:none; box-shadow:0 0 3px rgba(216,140,255,.4); }

/* Links inside chat */
.chat-panel a{ color:#f4f4f4; text-decoration:underline; }

/* Safety: prevent any leftover page-specific wallpaper from bleeding in */
[class*="wallpaper"], [data-wallpaper]{ background-image:none !important; }
/* === Two-column chat layout (portrait + chat) === */
.chat-shell{
  display: grid;
  grid-template-columns: minmax(260px, 420px) 1fr;
  gap: 24px;
  align-items: start;
  max-width: min(1200px, 94vw);
  margin: 20px auto 40px;
}

/* Portrait panel */
.hero{ position: sticky; top: 20px; }
#heroImg{
  width: 100%;
  height: auto;
  display: block;
  border-radius: 18px;
  box-shadow: 0 12px 30px rgba(0,0,0,.35);
}

/* Chat panel look */
.chat-col{
  background: rgba(0,0,0,.45);
  border: 1px solid rgba(255,255,255,.08);
  border-radius: 18px;
  padding: 14px;
  backdrop-filter: blur(2px);
  box-shadow: 0 12px 30px rgba(0,0,0,.35);
}

/* Chat feed area */
#feed{
  min-height: 60vh;
  padding: 12px;
  overflow: auto;
}

/* Composer row */
.composer-wrap form{ display: flex; gap: 10px; }
#input{
  flex: 1;
  background: rgba(255,255,255,.06);
  border: 1px solid rgba(255,255,255,.12);
  border-radius: 999px;
  padding: 12px 14px;
  color: #f4f4f4;
}
#sendBtn{
  background: var(--btn-grad, linear-gradient(180deg,#a67bcc,#8757b0));
  color: #fff;
  border: 0;
  border-radius: 999px;
  padding: 12px 18px;
  font-weight: 700;
  box-shadow: 0 10px 30px rgba(0,0,0,.35);
  cursor: pointer;
}

/* Mobile: stack columns */
@media (max-width: 900px){
  .chat-shell{ grid-template-columns: 1fr; }
  .hero{ position: static; }
}
/* === Chat bubble layout === */
.bubble {
  display: inline-block;
  max-width: 75%;
  padding: 12px 16px;
  margin: 8px 12px;
  border-radius: 16px;
  line-height: 1.4;
  font-size: 1rem;
  word-break: break-word;
  box-shadow: 0 3px 6px rgba(0,0,0,0.3);
}

/* user (you) on right */
.bubble.me {
  background: var(--button);
  color: #fff;
  align-self: flex-end;
  border-bottom-right-radius: 4px;
  margin-left: auto;
}

/* AI character (them) on left */
.bubble.them {
  background: rgba(255,255,255,0.08);
  color: var(--ink);
  align-self: flex-start;
  border-bottom-left-radius: 4px;
  margin-right: auto;
}
